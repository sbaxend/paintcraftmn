---
/**
 * CoveredBand â€” premium features strip
 * - Large, uniform icons in brand copper color
 * - Even card heights, smooth hover, keyboard focus
 * - Works with PNG/WEBP icons (colored via CSS filters)
 * - Optional bgImage for photo variant
 */

type Item = {
  img: string;        // /public path (e.g., "/craftmanship.webp")
  title: string;
  desc: string;
};

export interface Props {
  heading?: string;
  items?: Item[];
  bgImage?: string;   // optional: /public path for a photo background
}

const {
  heading = "We've got you covered",
  items = [
    { img: "/craftmanship.webp", title: "Guaranteed Craftsmanship", desc: "Worry-free results with a 3-year paint warranty" },
    { img: "/exellence.webp",   title: "Excellence at Every Stage", desc: "Professional coordination from start to finish" },
    { img: "/quality.webp",     title: "Highest Quality Standards", desc: "Premium paints & tested methods for unmatched results" },
  ],
  bgImage, // if provided, we'll render a dark overlay variant
} = Astro.props as Props;
---

<section class={`relative ${bgImage ? 'is-photo' : ''}`}>
  <!-- optional photo background -->
  {bgImage && (
    <>
      <img src={bgImage} alt="" aria-hidden="true"
           class="absolute inset-0 h-full w-full object-cover" loading="lazy" decoding="async" />
      <div class="absolute inset-0 bg-neutral-900/50"></div>
    </>
  )}

  <div class={`relative mx-auto max-w-7xl px-4 md:px-6 ${bgImage ? 'py-20 md:py-28' : 'py-16 md:py-24'}`}>
    <h2 class={`text-center font-serif font-semibold tracking-tight
                ${bgImage ? 'text-white' : 'text-neutral-900'}
                text-4xl md:text-6xl`}>
      {heading}
    </h2>

    <div class={`mt-10 grid gap-6 md:gap-8 sm:grid-cols-3`}>
      {items.map((item) => (
        <article
          class={`group relative overflow-hidden rounded-[24px]
                  ${bgImage ? 'bg-white/10 ring-1 ring-white/15' : 'bg-white ring-1 ring-[#C48356]/20'}
                  shadow-sm transition-all duration-300
                  hover:-translate-y-1 hover:shadow-xl hover:ring-[#C48356]/40
                  focus-within:-translate-y-1`}
          style="min-height: 320px"
        >
          <!-- subtle top shine with copper tint -->
          <div class="pointer-events-none absolute inset-x-0 top-0 h-12 bg-gradient-to-b from-[#C48356]/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>

          <div class="flex h-full flex-col items-center justify-start px-6 md:px-8 py-8 text-center">
            <!-- ICON: copper background with icon colored to match -->
            <div class="mb-8 flex h-48 w-48 items-center justify-center rounded-full bg-[#C48356]/10 ring-2 ring-[#C48356]/30 group-hover:bg-[#C48356]/15 group-hover:ring-[#C48356]/50 transition-all duration-300">

              <img
                src={item.img}
                alt=""
                role="presentation"
                class="h-4/5 w-4/5 object-contain icon-copper"
                loading="lazy"
                decoding="async"
              />
            </div>

            <h3 class={`text-xl md:text-2xl font-semibold ${bgImage ? 'text-white' : 'text-neutral-900'}`}>
              {item.title}
            </h3>

            <p class={`mt-3 text-base leading-7 ${bgImage ? 'text-white/85' : 'text-neutral-600'}`}>
              {item.desc}
            </p>

            <!-- focus ring for keyboard users -->
            <span class="absolute inset-0 rounded-[24px] focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2
                         focus-visible:ring-[#C48356] focus-visible:ring-offset-white" tabindex="-1"></span>
          </div>
        </article>
      ))}
    </div>
  </div>
</section>

<style>
  /* Color icons to match #C48356 (copper/terracotta) */
  .icon-copper {
    filter: brightness(0) saturate(100%) 
            invert(54%) sepia(27%) saturate(1089%) 
            hue-rotate(335deg) brightness(92%) contrast(88%);
  }
  
  /* For photo variant, make icons white */
  .is-photo .icon-copper {
    filter: brightness(0) invert(1);
  }

  /* Update ring colors for photo variant */
  .is-photo .ring-\[\#C48356\]\/20,
  .is-photo .ring-\[\#C48356\]\/30,
  .is-photo .ring-\[\#C48356\]\/50 {
    --tw-ring-color: rgba(255, 255, 255, 0.2);
  }
  
  .is-photo .text-neutral-900 { 
    color: white;
  }
</style>