---
/**
 * ServiceDetailFAQ.astro
 *
 * Reusable FAQ block with schema.org markup for SEO.
 */

export interface FAQItem {
  q: string;
  a: string;
}

export interface Props {
  title?: string;
  items: FAQItem[];
}

const { title = "Frequently Asked Questions", items = [] } =
  Astro.props as Props;
---

{items.length > 0 && (
  <section class="bg-white" id="service-faq">
    <div class="mx-auto max-w-5xl px-6 md:px-10 py-14 md:py-20">
      <h2 class="text-2xl md:text-3xl font-bold text-neutral-900 mb-6">
        {title}
      </h2>

      <div class="border border-neutral-200 rounded-2xl divide-y divide-neutral-200 overflow-hidden">
        {items.map(({ q, a }) => (
          <details
            class="group open:bg-neutral-50 transition-colors"
            itemscope
            itemprop="mainEntity"
            itemtype="https://schema.org/Question"
          >
            <summary class="cursor-pointer p-5 md:p-6 flex justify-between items-center list-none">
              <span
                class="font-medium text-neutral-900 text-base md:text-lg"
                itemprop="name"
              >
                {q}
              </span>

              <span
                class="ml-4 inline-flex h-7 w-7 items-center justify-center rounded-full border border-neutral-300 text-neutral-700 text-sm"
              >
                <span class="group-open:hidden">+</span>
                <span class="hidden group-open:inline">â€“</span>
              </span>
            </summary>

            <div
              class="p-5 md:p-6 pt-0 text-neutral-700 leading-relaxed text-sm md:text-base"
              itemscope
              itemprop="acceptedAnswer"
              itemtype="https://schema.org/Answer"
            >
              <p itemprop="text">{a}</p>
            </div>
          </details>
        ))}
      </div>

      <!-- Structured Data for SEO -->
      <script type="application/ld+json">
        {JSON.stringify({
          "@context": "https://schema.org",
          "@type": "FAQPage",
          mainEntity: items.map((item) => ({
            "@type": "Question",
            name: item.q,
            acceptedAnswer: {
              "@type": "Answer",
              text: item.a,
            },
          })),
        })}
      </script>
    </div>
  </section>
)}
