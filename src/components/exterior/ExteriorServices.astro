---
// src/components/exterior/ExteriorServices.astro

type Service = {
  id: string;
  title: string;
  img: string;
  href?: string;
};

export interface Props {
  heading?: string;
  sub?: string;
  services: Service[];
  minHeight?: string;
  basePath?: string;
}

const {
  heading = "Our Exterior Services",
  sub = "From siding to decks, we prep and coat for Minnesota weather.",
  services = [],
  minHeight = "min-h-[80vh]",
  basePath = "/exterior",
} = Astro.props as Props;

const items = services.map((s) => ({
  ...s,
  href: s.href ?? `${basePath}/${s.id}`,
}));
---

<section class="relative bg-neutral-50 py-20 md:py-32">
  <div class="pointer-events-none absolute inset-0 bg-[radial-gradient(ellipse_at_center,rgba(0,0,0,0.04)_0%,transparent_70%)]"></div>

  <div class="relative mx-auto max-w-[1600px] px-4 md:px-10">
    <!-- Heading -->
    <div class="mb-10 md:mb-14 text-center">
      <h2 class="text-3xl md:text-4xl font-sans font-semibold tracking-tight text-neutral-900">
        {heading}
      </h2>
      <p class="mt-3 text-neutral-600 text-base md:text-lg max-w-2xl mx-auto">
        {sub}
      </p>
    </div>

    <!-- META-STYLE BUBBLE -->
    <div
      id="svc-wrap"
      class="relative mx-auto w-full overflow-hidden rounded-[2rem] bg-black/90 shadow-2xl ring-1 ring-neutral-200/70 transform-gpu"
    >
      <!-- Track -->
      <div
        id="svc-track"
        class={`flex transition-transform duration-700 ease-out ${minHeight}`}
        style="will-change: transform;"
      >
        {items.map((s, i) => (
          <article
            class={`slide ${i === 0 ? "is-active" : ""} relative shrink-0 w-full ${minHeight}`}
            data-dir="forward"
          >
            <!-- Background image -->
            <img
              src={s.img}
              alt={s.title}
              class="absolute inset-0 h-full w-full object-cover"
              loading="lazy"
              decoding="async"
            />

            <!-- Gradient overlay -->
            <div class="pointer-events-none absolute inset-0 bg-gradient-to-t from-black/80 via-black/45 to-black/20"></div>

            <!-- Content -->
            <div class="relative z-10 h-full w-full flex items-center justify-center">
              <div class="px-6 md:px-12 py-12 md:py-16 flex justify-center w-full">
                <div class="slide-content max-w-2xl text-center flex flex-col items-center">
                  <h3 class="stagger text-white text-3xl md:text-5xl lg:text-6xl font-black font-sans font-semibold tracking-tight leading-[0.95] mb-4 md:mb-6">
                    {s.title}
                  </h3>

                  <p class="stagger text-white/90 text-sm md:text-lg mb-6 md:mb-8 leading-relaxed max-w-xl">
                    {sub}
                  </p>

                  <div class="stagger flex flex-wrap gap-3 mt-4">
                    <a
                      href={s.href}
                      class="inline-flex items-center justify-center rounded-full bg-white px-6 md:px-8 py-3 md:py-3.5 text-sm md:text-base font-semibold text-neutral-900 hover:bg-neutral-100 transition-all hover:scale-105 shadow-lg"
                    >
                      Learn More
                    </a>
                    <a
                      href="/contact"
                      class="inline-flex items-center justify-center rounded-full border-2 border-white bg-transparent px-6 md:px-8 py-3 md:py-3.5 text-sm md:text-base font-semibold text-white hover:bg-white hover:text-neutral-900 transition-all"
                    >
                      Schedule Now
                    </a>
                  </div>
                </div>
              </div>
            </div>
          </article>
        ))}
      </div>

      <!-- Arrows -->
      <button
        id="svc-prev"
        class="absolute left-4 md:left-6 top-1/2 -translate-y-1/2 h-10 w-10 md:h-12 md:w-12 rounded-full bg-white/95 backdrop-blur-sm flex items-center justify-center hover:bg-white transition-all z-30 shadow-xl"
        aria-label="Previous slide"
      >
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
          <path d="M15 18l-6-6 6-6" />
        </svg>
      </button>

      <button
        id="svc-next"
        class="absolute right-4 md:right-6 top-1/2 -translate-y-1/2 h-10 w-10 md:h-12 md:w-12 rounded-full bg-white/95 backdrop-blur-sm flex items-center justify-center hover:bg-white transition-all z-30 shadow-xl"
        aria-label="Next slide"
      >
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
          <path d="M9 18l6-6-6-6" />
        </svg>
      </button>

      <!-- Dots -->
      <div id="svc-dots" class="absolute bottom-6 md:bottom-8 left-6 md:left-10 flex gap-2 md:gap-3 z-30">
        {items.map((_, i) => (
          <button
            class="h-2 w-2 md:h-2.5 md:w-2.5 rounded-full bg-white/40 hover:bg-white/70 transition-all aria-[current=true]:bg-white aria-[current=true]:w-6 md:aria-[current=true]:w-7"
            aria-current={i === 0 ? "true" : "false"}
            aria-label={`Go to slide ${i + 1}`}
          ></button>
        ))}
      </div>

      <!-- Play / Pause -->
      <button
        id="svc-auto"
        class="absolute bottom-6 md:bottom-8 right-6 md:right-10 h-9 w-9 md:h-10 md:w-10 rounded-full bg-white/15 backdrop-blur-md flex items-center justify-center hover:bg-white/25 transition-all z-30"
        aria-label="Pause autoplay"
        data-state="playing"
        title="Pause/Play"
      >
        <svg class="icon-pause h-4 w-4 md:h-4 md:w-4 text-white" viewBox="0 0 24 24" fill="currentColor">
          <path d="M6 5h4v14H6zM14 5h4v14h-4z" />
        </svg>
        <svg class="icon-play h-4 w-4 md:h-4 md:w-4 text-white hidden" viewBox="0 0 24 24" fill="currentColor">
          <path d="M8 5v14l11-7z" />
        </svg>
      </button>
    </div>
  </div>
</section>

<!-- keep the exact same <script is:inline> and <style> blocks you already have -->
